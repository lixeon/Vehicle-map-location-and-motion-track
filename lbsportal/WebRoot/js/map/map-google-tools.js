(function(){var e=new google.maps.Geocoder();function c(r){if(vp.v.map_type=="google-overseas"||r.x<73.499413||r.x>134.77281||r.y<18.153521||r.y>53.560973){return r}var n=Math.PI,t=6378245,m=0.006693421622965943;var l=r.x-105;var o=r.y-35;var q=300+l+2*o+0.1*l*l+0.1*l*o+0.1*Math.sqrt(Math.abs(l));q+=(20*Math.sin(6*l*n)+20*Math.sin(2*l*n))*2/3;q+=(20*Math.sin(l*n)+40*Math.sin(l/3*n))*2/3;q+=(150*Math.sin(l/12*n)+300*Math.sin(l/30*n))*2/3;var s=-100+2*l+3*o+0.2*o*o+0.1*l*o+0.2*Math.sqrt(Math.abs(l));s+=(20*Math.sin(6*l*n)+20*Math.sin(2*l*n))*2/3;s+=(20*Math.sin(o*n)+40*Math.sin(o/3*n))*2/3;s+=(160*Math.sin(o/12*n)+320*Math.sin(o*n/30))*2/3;var v=r.y/180*n;var p=Math.sin(v);p=1-m*p*p;var u=Math.sqrt(p);q=(q*180)/(t/u*Math.cos(v)*n);s=(s*180)/((t*(1-m))/(p*u)*n);return{x:r.x+q,y:r.y+s}}var d=function(g,h,f){if(vp.v.map_type=="google-overseas"){b(g,h,f)}else{a(g,h,f)}};var a=function(g,i,f){var h="http://api.map.baidu.com/geocoder/v2/?ak="+lbs.consts.BAIDU_KEY+"&coordtype=wgs84ll&location="+i+","+g+"&output=json&pois=1";$.ajax({type:"get",async:true,url:h,dataType:"jsonp",jsonp:"callback",success:function(k){if(k.status!="0"){f("地图服务器请求错误：未知区域")}var j=k.result.pois;var l="";if(j!=null&&j.length>0){l=j[0].addr+j[0].name+"附近"}else{l=k.result.formatted_address}f(l)}})};var b=function(g,j,f){var i=vp.m.adjustXY(g,j);var h=new google.maps.LatLng(i.y,i.x);e.geocode({location:h},function(l,k){if(k==google.maps.GeocoderStatus.OK){if(l!=null&&l.length>0){f(l[0].formatted_address)}}else{if(k==google.maps.GeocoderStatus.ZERO_RESULTS){f("Unknown Area!")}else{}}})};vp.m.getLocation=d;vp.m.adjustXY=function(f,g){return c({x:parseFloat(f),y:parseFloat(g)})}})();