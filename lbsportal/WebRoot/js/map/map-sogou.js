(function(){var f=13;var a="map_canvas";var l="panel_map_toolbar";var k=null;var i=null;var m={};var h=null;var e=function(){};function p(s){a=s.panelId;l=s.toolbarId;var r=$(window).width()-1*2;var t=$(window).height()-$("#panel_header").height()-2*2;$("#"+a).css({height:t+"px",width:r+"px"});$("#"+l).css({"margin-left":(r*0.618)-40*4+"px"});$("#"+l).show();var q={zoom:s.zoom||f,center:new sogou.maps.LatLng(parseFloat(vp.v.city_clat),parseFloat(vp.v.city_clng)),mapTypeId:sogou.maps.MapTypeId.ROADMAP,mapControlType:1,callback:e};k=new sogou.maps.Map(document.getElementById(a),q);i=new Ruler({map:k});$("#btn_map_measuredistance").click(function(){i.open()});h=new sogou.maps.Convertor()}function j(s){g(s.mkid);var v=new sogou.maps.LatLng(s.y,s.x);var q=new sogou.maps.Marker({id:"#MM"+s.mkid,map:k,position:v,label:{visible:true,align:"RIGHT"},title:s.name,icon:(s.imgUrl)?s.imgUrl:""});if(s.center){k.panTo(v)}else{if(s.inView){var u=h.toSogou(v);var r=k.getBounds();if(!r.contains(u)){k.panTo(v)}}}if(s.infoWin){var t=new sogou.maps.InfoWindow({content:s.infoWin.content});t.setTitle(s.infoWin.title);sogou.maps.event.addListener(q,s.infoWin.action,function(){t.open(k,q)})}m["#MM"+s.mkid]=q}function g(r){var q=m["#MM"+r];if(q!=null){q.setMap(null);m["#MM"+r]=null}}function o(t){var s=[];for(var r=0;r<t.xs.length;r++){s.push(new sogou.maps.LatLng(parseFloat(t.ys[r]),parseFloat(t.xs[r])))}var q=new sogou.maps.Polyline({id:"#ML"+t.lid,map:k,path:s,strokeColor:t.color||"#0000ff",strokeOpacity:0.75,strokeWeight:4});m["#ML"+t.lid]=q}function n(r){var q=m["#ML"+r];if(q!=null){q.setMap(null);m["#ML"+r]=null}}function b(q,r){$("#"+a).css({height:r+"px",width:q+"px"});$("#"+l).css({"margin-left":(q*0.618)-40*4+"px"})}function c(q,r){if(q=="zoom"){if(r==undefined){return k.getZoom()}else{k.setZoom(r)}}}function d(){var q=k.getBounds();var r={swx:q.getSouthWest().x,swy:q.getSouthWest().y,nex:q.getNorthEast().x,ney:q.getNorthEast().y};return r}vp.m.init=p;vp.m.resize=b;vp.m.showLoc=j;vp.m.removeMark=g;vp.m.drawLine=o;vp.m.removeLine=n;vp.m.mapConfig=c;vp.m.getMapBounds=d})();